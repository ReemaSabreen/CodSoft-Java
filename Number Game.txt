import java.util.Scanner;
import java.util.Random;

public class NumberGuessingGame {
    public static void main(String[] args) {
        playGame();
    }

    // Function to generate a random number within a specified range
    private static int generateRandomNumber(int lower, int upper) {
        Random rand = new Random();
        return rand.nextInt(upper - lower + 1) + lower;
    }

    // Function to play a single round of the number guessing game
    private static int playRound() {
        System.out.println("Welcome to Guess the Number Game!");

        // Set the range for the random number
        int lowerLimit = 1;
        int upperLimit = 100;

        int targetNumber = generateRandomNumber(lowerLimit, upperLimit);

        // Set the maximum number of attempts
        int maxAttempts = 10;
        int attempts = 0;
        int userGuess;

        Scanner scanner = new Scanner(System.in);

        while (attempts < maxAttempts) {
            // Prompt the user to enter their guess
            System.out.print("Guess a number between " + lowerLimit + " and " + upperLimit + ": ");

            // Validate user input to handle non-integer input
            while (!scanner.hasNextInt()) {
                System.out.println("Invalid input. Please enter a valid integer.");
                scanner.next(); // Clear the invalid input
            }

            userGuess = scanner.nextInt();

            // Check the user's guess
            if (userGuess == targetNumber) {
                System.out.println("Congratulations! You guessed the correct number " + targetNumber + " in " + (attempts + 1) + " attempts.");
                break;
            } else if (userGuess < targetNumber) {
                System.out.println("Try guessing a higher number.");
            } else {
                System.out.println("Try guessing a lower number.");
            }

            attempts++;
        }

        if (attempts == maxAttempts) {
            System.out.println("Sorry, you've run out of attempts. The correct number was " + targetNumber + ".");
        }

        return attempts;
    }

    // Function to play the game multiple times
    private static void playGame() {
        int roundsWon = 0;
        char playAgain;
        int totalAttempts = 0;

        Scanner scanner = new Scanner(System.in);

        do {
            totalAttempts += playRound();
            roundsWon++;

            // Display the score after each round
            System.out.println("\nScore after Round " + roundsWon + ":");
            System.out.println("Rounds won: " + roundsWon);
            System.out.println("Total attempts: " + totalAttempts);

            // Ask the user if they want to play again
            System.out.println("\nDo you want to play again? (y/n): ");

            // Validate user input for replay
            while (true) {
                playAgain = scanner.next().toLowerCase().charAt(0);
                if (playAgain == 'y' || playAgain == 'n') {
                    break;
                } else {
                    System.out.println("Invalid input. Please enter 'y' for yes or 'n' for no.");
                }
            }

        } while (playAgain == 'y');

        System.out.println("\nGame Over. Your final score:");
        System.out.println("Rounds won: " + roundsWon);
        System.out.println("Total attempts: " + totalAttempts);
        scanner.close();
    }
}
